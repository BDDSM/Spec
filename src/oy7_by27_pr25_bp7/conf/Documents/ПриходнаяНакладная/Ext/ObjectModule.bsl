
Процедура ОбработкаПроведения(Отказ, Режим)
	Движения.ОстаткиНоменклатуры.Записывать = Истина;
	Движения.Партии.Записывать = Истина;
	
	Движения.ОстаткиНоменклатуры.Очистить();
	Движения.Партии.Очистить();
	
	Для Каждого ТекСтрокаТовары Из Товары Цикл
		// регистр ОстаткиНоменклатуры Приход
		Движение = Движения.ОстаткиНоменклатуры.ДобавитьПриход();
		Движение.Период			 = Дата;
		Движение.Номенклатура	 = ТекСтрокаТовары.Номенклатура;
		Движение.Склад			 = Склад;
		Движение.Количество		 = ТекСтрокаТовары.Количество;
		
		// регистр Партии Приход
		Движение = Движения.Партии.ДобавитьПриход();
		Движение.Период			 = Дата;
		Движение.Номенклатура	 = ТекСтрокаТовары.Номенклатура;
		Движение.Партия			 = Ссылка;
		Движение.Количество		 = ТекСтрокаТовары.Количество;
		Движение.Стоимость		 = ТекСтрокаТовары.Сумма;
	КонецЦикла;
КонецПроцедуры
